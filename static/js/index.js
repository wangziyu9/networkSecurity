$(function () {
    echart_1();
    echart_2();

    echart_3();
    echart_4();

    echart_map();
    
    //全国达标城市
    echart_5();
    echart_6();

    vue_table();
    var app = {};


    function vue_table() {
        Vue.component('todo-item', {
            props: ['todo'],
            template: '<tbody>{{ todo.text }}</tbody>'
        })
        var rank_table_henan = new Vue({
            el: '#rank_table_henan',
            data: {
                rows: [{
                        id: 0,
                        text: '正在加载',
                        AQI: 0.23
                    },
                    {
                        id: 1,
                        text: '空气质量状态',
                        AQI: 0.23
                    },
                    {
                        id: 2,
                        text: '请稍候……',
                        AQI: 0.23
                    }
                ]
            }
        });

        var rank_table_china = new Vue({
            el: '#rank_table_china',
            data: {
                rows: [{
                        id: 0,
                        text: '正在加载',
                        AQI: 0.23
                    },
                    {
                        id: 1,
                        text: '空气质量状态',
                        AQI: 0.23
                    },
                    {
                        id: 2,
                        text: '请稍候……',
                        AQI: 0.23
                    }
                ]
            }
        });
        $.post("/data/henan_aqirank", function (data, status) {
            rank_table_henan._data.rows = data
        });

        $.post("/data/china_aqirank", function (data, status) {
            rank_table_china._data.rows = data
        });
    }



    //echart_1折线图
    function echart_1() {
        data = [
            ["2019-06-05", 116],
            ["2019-06-06", 129],
            ["2019-06-07", 135],
            ["2019-06-08", 86],
            ["2019-06-09", 73],
            ["2019-06-10", 85],
            ["2019-06-11", 73],
            ["2019-06-12", 68],
            ["2019-06-13", 92],
            ["2019-06-14", 130],
            ["2019-06-15", 245],
            ["2019-06-16", 139],
            ["2019-06-17", 115],
            ["2019-06-18", 111],
            ["2019-06-19", 309],
            ["2019-06-20", 206],
            ["2019-06-21", 137],
            ["2019-06-22", 128],
            ["2019-06-23", 85],
            ["2019-06-24", 94],
            ["2019-06-25", 71],
            ["2019-06-26", 106],
            ["2019-06-27", 84],
            ["2019-06-28", 93],
            ["2019-06-29", 85],
            ["2019-06-30", 73],
            ["2019-07-01", 83],
            ["2019-07-02", 125],
            ["2019-07-03", 107],
            ["2019-07-04", 82],
            ["2019-07-05", 44],
            ["2019-07-06", 72],
            ["2019-07-07", 106],
            ["2019-07-08", 107],
            ["2019-07-09", 66],
            ["2019-07-10", 91],
            ["2019-07-11", 92],
            ["2019-07-12", 113],
            ["2019-07-13", 107],
            ["2019-07-14", 131],
            ["2019-07-15", 111],
            ["2019-07-16", 64],
            ["2019-07-17", 69],
            ["2019-07-18", 88],
            ["2019-07-19", 77],
            ["2019-07-20", 83],
            ["2019-07-21", 111],
            ["2019-07-22", 57],
            ["2019-07-23", 55],
            ["2019-07-24", 60],
            ["2019-07-25", 44],
            ["2019-07-26", 127],
            ["2019-07-27", 114],
            ["2019-07-28", 86],
            ["2019-07-29", 73],
            ["2019-07-30", 52],
            ["2019-07-31", 69],
            ["2019-08-01", 86],
            ["2019-08-02", 118],
            ["2019-08-03", 56],
            ["2019-08-04", 91],
            ["2019-08-05", 121],
            ["2019-08-06", 127],
            ["2019-08-07", 78],
            ["2019-08-08", 79],
            ["2019-08-09", 46],
            ["2019-08-10", 108],
            ["2019-08-11", 80],
            ["2019-08-12", 79],
            ["2019-08-13", 69],
            ["2019-08-14", 80],
            ["2019-08-15", 105],
            ["2019-08-16", 119],
            ["2019-08-17", 105],
            ["2019-08-18", 55],
            ["2019-08-19", 74],
            ["2019-08-20", 41],
            ["2019-08-21", 62],
            ["2019-08-22", 104],
            ["2019-08-23", 118],
            ["2019-08-24", 121],
            ["2019-08-25", 126],
            ["2019-08-26", 99],
            ["2019-08-27", 92],
            ["2019-08-28", 75],
            ["2019-08-29", 91],
            ["2019-08-30", 94],
            ["2019-08-31", 69],
            ["2019-09-01", 93],
            ["2019-09-02", 124],
            ["2019-09-03", 120],
            ["2019-09-04", 93],
            ["2019-09-05", 26],
            ["2019-09-06", 32],
            ["2019-09-07", 70],
            ["2019-09-08", 89],
            ["2019-09-10", 117],
            ["2019-09-11", 144],
            ["2019-09-12", 111],
            ["2019-09-13", 120],
            ["2019-09-14", 97],
            ["2019-09-15", 108],
            ["2019-09-17", 74],
            ["2019-09-18", 105]
        ];
        var myChart = echarts.init(document.getElementById('chart_1'));
        myChart.setOption(option = {
            title: {
                text: '郑州 AQI'
            },
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                data: data.map(function (item) {
                    return item[0];
                })
            },
            yAxis: {
                splitLine: {
                    show: false
                }
            },
            // toolbox: {
            //     left: 'center',
            //     feature: {
            //         dataZoom: {
            //             yAxisIndex: 'none'
            //         },
            //         restore: {},
            //         saveAsImage: {}
            //     }
            // },
            // dataZoom: [{
            //     startValue: '2016-06-01'
            // }, {
            //     type: 'inside'
            // }],
            visualMap: {
                top: 10,
                right: 10,
                pieces: [{
                    gt: 0,
                    lte: 50,
                    color: '#096'
                }, {
                    gt: 50,
                    lte: 100,
                    color: '#ffde33'
                }, {
                    gt: 100,
                    lte: 150,
                    color: '#ff9933'
                }, {
                    gt: 150,
                    lte: 200,
                    color: '#cc0033'
                }, {
                    gt: 200,
                    lte: 300,
                    color: '#660099'
                }, {
                    gt: 300,
                    color: '#7e0023'
                }],
                outOfRange: {
                    color: '#999'
                }
            },
            series: {
                type: 'line',
                data: data.map(function (item) {
                    return item[1];
                }),
                markLine: {
                    silent: true,
                    data: [{
                        yAxis: 50
                    }, {
                        yAxis: 100
                    }, {
                        yAxis: 150
                    }, {
                        yAxis: 200
                    }, {
                        yAxis: 300
                    }]
                }
            }
        });
    }

    //echart_2河南省地图
    function echart_2() {
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('chart_2'));
        $.post("/data/henan_aqirank", function (data, status) {
            myChart.setOption(option = {
                // backgroundColor: '#ffffff',
                visualMap: {
                    show: false,
                    min: 0,
                    max: 100,
                    left: 'left',
                    top: 'bottom',
                    text: ['高', '低'], // 文本，默认为数值文本
                    calculable: true,
                    inRange: {
                        color: ['lightskyblue', 'lightgreen', 'red']
                    }
                },
                series: [{
                    type: 'map',
                    mapType: '河南',
                    roam: true,
                    label: {
                        normal: {
                            show: true
                        },
                        emphasis: {
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderColor: '#389BB7',
                            areaColor: '#fff',
                        },
                        emphasis: {
                            areaColor: '#389BB7',
                            borderWidth: 0
                        }
                    },
                    animation: false,
                    data: data
                }]
            });
        });
        myChart.on('click', function (params) {
            window.open('/citymap/' + encodeURIComponent(params.name).replace("%E5%B8%82", ""));
        });
        window.addEventListener("resize", function () {
            myChart.resize();
        });
    }


    // echart_map中国地图
    function echart_map() {
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('chart_map'));
        var app = {};
        myChart.showLoading({text:"正在全力加载"});
        option = null;
        $.post("/data/china_aqirank", function (data, status) {
        var data = data;
        
        var geoCoordMap = {
            "七台河": [131.003138, 45.771726],
            "三亚": [109.511909, 18.252847],
            "三明": [117.638678, 26.263406],
            "三沙": [112.338695, 16.831839],
            "三门峡": [111.200135, 34.772493],
            "上海": [121.473701, 31.230416],
            "上饶": [117.943433, 28.454863],
            "东莞": [113.751765, 23.020536],
            "东营": [118.674767, 37.434751],
            "中卫": [105.196902, 37.499972],
            "中山": [113.392782, 22.517645],
            "临夏州": [103.210538, 35.601182],
            "临安": [119.718891, 30.237881],
            "临汾": [111.518976, 36.088005],
            "临沂": [118.356448, 35.104672],
            "临沧": [100.079583, 23.877573],
            "丹东": [124.354706, 40.000499],
            "丽水": [119.922796, 28.46763],
            "丽江": [100.22775, 26.855047],
            "义乌": [120.075058, 29.306841],
            "乌兰察布": [113.132585, 40.994785],
            "乌海": [106.794249, 39.655388],
            "乌鲁木齐": [87.616848, 43.825592],
            "乐山": [103.765568, 29.552106],
            "九江": [116.00193, 29.705077],
            "乳山": [121.54909, 36.89397],
            "云浮": [112.044491, 22.915094],
            "五家渠": [87.523308, 44.161854],
            "亳州": [115.778676, 33.844582],
            "伊春": [128.841147, 47.727536],
            "伊犁哈萨克": [81.324136, 43.916823],
            "伊犁哈萨克州": [81.324136, 43.916823],
            "佛山": [113.121416, 23.021548],
            "佳木斯": [130.318917, 46.799922],
            "保定": [115.464806, 38.873891],
            "保山": [99.161761, 25.112046],
            "信阳": [114.091023, 32.146983],
            "克州": [76.167819, 39.714526],
            "克拉玛依": [84.889207, 45.579888],
            "六安": [116.521854, 31.733699],
            "六盘水": [104.830359, 26.592666],
            "兰州": [103.834303, 36.061089],
            "兴安盟": [122.067042, 46.077561],
            "内江": [105.058433, 29.580228],
            "凉山州": [102.267335, 27.88161],
            "包头": [109.840347, 40.657449],
            "北京": [116.407526, 39.90403],
            "北海": [109.119927, 21.481254],
            "十堰": [110.79799, 32.629397],
            "南京": [118.796877, 32.060255],
            "南充": [106.110698, 30.837793],
            "南宁": [108.366543, 22.817002],
            "南平": [118.177708, 26.641768],
            "南昌": [115.858197, 28.682892],
            "南通": [120.894291, 31.980171],
            "南阳": [112.528321, 32.990833],
            "博州": [104.737892, 27.666708],
            "即墨": [120.453079, 36.388599],
            "厦门": [118.089425, 24.479833],
            "双鸭山": [131.159133, 46.646508],
            "句容": [119.168695, 31.944999],
            "台州": [121.420757, 28.656386],
            "合肥": [117.227239, 31.820586],
            "吉安": [114.992509, 27.113443],
            "吉林": [125.32599, 43.896536],
            "吐鲁番地区": [89.189651, 42.951382],
            "吕梁": [111.144319, 37.518314],
            "吴忠": [106.198393, 37.99746],
            "吴江": [120.640272, 30.976323],
            "周口": [114.696951, 33.626149],
            "呼伦贝尔": [119.765744, 49.211574],
            "呼和浩特": [111.74918, 40.842585],
            "和田地区": [79.922211, 37.114157],
            "咸宁": [114.322492, 29.841443],
            "咸阳": [108.708991, 34.329605],
            "哈密地区": [93.513161, 42.833248],
            "哈尔滨": [126.534967, 45.803775],
            "唐山": [118.180193, 39.630867],
            "商丘": [115.65637, 34.414172],
            "商洛": [109.940477, 33.870422],
            "喀什地区": [75.989755, 39.4704],
            "嘉兴": [120.755486, 30.746129],
            "嘉峪关": [98.289152, 39.77313],
            "四平": [124.350398, 43.166419],
            "固原": [106.24261, 36.015855],
            "塔城地区": [82.980316, 46.745364],
            "大兴安岭地": [124.71108, 52.335206],
            "大兴安岭地区": [124.71108, 52.335206],
            "大同": [113.300129, 40.076762],
            "大庆": [125.103784, 46.589309],
            "大理州": [100.267638, 25.606486],
            "大连": [121.614682, 38.914003],
            "天水": [105.724947, 34.580863],
            "天津": [117.200983, 39.084158],
            "太仓": [121.125358, 31.441361],
            "太原": [112.548879, 37.87059],
            "威海": [122.120419, 37.513068],
            "娄底": [111.993497, 27.700062],
            "孝感": [113.916902, 30.924568],
            "宁德": [119.547932, 26.665617],
            "宁波": [121.550357, 29.874556],
            "安庆": [117.063754, 30.543494],
            "安康": [109.029022, 32.684714],
            "安阳": [114.392392, 36.097577],
            "安顺": [105.947593, 26.253072],
            "定西": [104.626282, 35.580662],
            "宜兴": [119.804423, 31.362399],
            "宜宾": [104.643215, 28.751768],
            "宜昌": [111.286471, 30.691967],
            "宜春": [114.416778, 27.815619],
            "宝鸡": [107.237974, 34.361979],
            "宣城": [118.758816, 30.940718],
            "宿州": [116.964356, 33.646373],
            "宿迁": [118.275198, 33.963232],
            "富阳": [119.923046, 30.053477],
            "寿光": [118.73645, 36.874413],
            "山南": [91.773134, 29.237137],
            "山南地区": [91.766525, 29.236023],
            "岳阳": [113.128958, 29.357104],
            "崇左": [107.364711, 22.376532],
            "巴中": [106.747477, 31.867903],
            "巴彦淖尔": [107.387657, 40.743213],
            "常州": [119.973987, 31.810689],
            "常德": [111.698497, 29.031673],
            "常熟": [120.757951, 31.649566],
            "平凉": [106.66524, 35.543051],
            "平度": [119.966661, 36.798875],
            "平顶山": [113.192661, 33.766169],
            "广元": [105.843357, 32.435435],
            "广安": [106.633212, 30.455961],
            "广州": [113.264434, 23.129162],
            "庆阳": [107.643631, 35.709077],
            "库尔勒": [86.2129, 41.78196],
            "廊坊": [116.683752, 39.538047],
            "延安": [109.489727, 36.585455],
            "延边州": [129.508946, 42.891253],
            "开封": [114.307581, 34.797239],
            "张家口": [114.887543, 40.824418],
            "张家港": [120.768611, 31.446084],
            "张家界": [110.479191, 29.117096],
            "张掖": [100.449818, 38.925875],
            "徐州": [117.284124, 34.205768],
            "德宏州": [98.584895, 24.433353],
            "德州": [116.357464, 37.434092],
            "德阳": [104.397894, 31.126855],
            "忻州": [112.734174, 38.416663],
            "怀化": [109.998488, 27.554978],
            "怒江州": [98.853097, 25.852547],
            "恩施州": [109.488172, 30.272156],
            "惠州": [114.416196, 23.111847],
            "成都": [104.066541, 30.572269],
            "扬州": [119.412966, 32.39421],
            "承德": [117.96241, 40.954071],
            "抚州": [116.358181, 27.949217],
            "抚顺": [123.957208, 41.880872],
            "拉萨": [91.140856, 29.645554],
            "招远": [120.403145, 37.364918],
            "揭阳": [116.372831, 23.549993],
            "攀枝花": [101.718637, 26.582347],
            "文山州": [104.216248, 23.400733],
            "文登": [122.122944, 37.203333],
            "新乡": [113.9268, 35.303004],
            "新余": [114.917346, 27.817808],
            "无锡": [120.31191, 31.491169],
            "日喀则": [88.880583, 29.266869],
            "日喀则地区": [88.880583, 29.266869],
            "日照": [119.526888, 35.416377],
            "昆山": [120.974177, 31.341479],
            "昆明": [102.832891, 24.880095],
            "昌吉州": [87.308224, 44.011182],
            "昌都": [97.17202, 31.140969],
            "昌都地区": [97.17202, 31.140969],
            "昭通": [103.717465, 27.338257],
            "晋中": [112.752694, 37.687024],
            "晋城": [112.851831, 35.490701],
            "普洱": [100.966512, 22.825065],
            "景德镇": [117.178419, 29.268835],
            "曲靖": [103.796167, 25.489999],
            "朔州": [112.432825, 39.331595],
            "朝阳": [120.471504, 41.585133],
            "本溪": [123.766485, 41.294175],
            "来宾": [109.221465, 23.750306],
            "杭州": [120.15507, 30.274084],
            "松原": [124.825117, 45.141789],
            "林芝": [94.361558, 29.648943],
            "林芝地区": [94.361558, 29.648943],
            "果洛州": [100.244808, 34.471431],
            "枣庄": [117.323725, 34.810487],
            "柳州": [109.415953, 24.325502],
            "株洲": [113.134002, 27.82755],
            "桂林": [110.290194, 25.273566],
            "梅州": [116.122238, 24.288615],
            "梧州": [111.279115, 23.476962],
            "楚雄州": [101.528068, 25.045532],
            "榆林": [109.734589, 38.28539],
            "武威": [102.638011, 37.928264],
            "武汉": [114.305392, 30.593098],
            "毕节": [105.283992, 27.302589],
            "永州": [111.613445, 26.420394],
            "汉中": [107.023323, 33.06748],
            "汕头": [116.681972, 23.354091],
            "汕尾": [115.375278, 22.786211],
            "江门": [113.081901, 22.578738],
            "江阴": [120.239272, 31.889641],
            "池州": [117.491568, 30.6648],
            "沈阳": [123.431474, 41.805698],
            "沧州": [116.838834, 38.304477],
            "河池": [108.085261, 24.692931],
            "河源": [114.700447, 23.743538],
            "泉州": [118.675675, 24.874132],
            "泰安": [117.087614, 36.200252],
            "泰州": [119.923116, 32.455778],
            "泸州": [105.442258, 28.871811],
            "洛阳": [112.45404, 34.619682],
            "济南": [117.119999, 36.651216],
            "济宁": [116.587098, 35.414921],
            "海东地区": [121.198479, 31.89315],
            "海北州": [100.900997, 36.954413],
            "海南州": [100.620373, 36.286437],
            "海口": [110.198293, 20.044001],
            "海西州": [97.369751, 37.377139],
            "海门": [121.123088, 31.883544],
            "淄博": [118.054927, 36.813487],
            "淮北": [116.798265, 33.955844],
            "淮南": [116.999932, 32.625478],
            "淮安": [119.015285, 33.610353],
            "深圳": [114.057868, 22.543099],
            "清远": [113.056031, 23.681763],
            "温州": [120.699366, 27.994267],
            "渭南": [109.509786, 34.499995],
            "湖州": [120.086823, 30.894348],
            "湘潭": [112.944049, 27.829738],
            "湘西州": [109.739172, 28.311947],
            "湛江": [110.359377, 21.270707],
            "溧阳": [119.484211, 31.416911],
            "滁州": [118.317106, 32.301556],
            "滨州": [117.970703, 37.38199],
            "漯河": [114.016539, 33.581412],
            "漳州": [117.647481, 24.512948],
            "潍坊": [119.161755, 36.706774],
            "潮州": [116.622603, 23.65695],
            "濮阳": [115.029215, 35.761829],
            "烟台": [121.447935, 37.463822],
            "焦作": [113.241823, 35.215892],
            "牡丹江": [129.633163, 44.551655],
            "玉林": [110.164756, 22.636379],
            "玉树州": [97.091934, 33.011674],
            "玉溪": [102.546543, 24.352036],
            "珠海": [113.576726, 22.270715],
            "瓦房店": [121.993874, 39.685108],
            "甘南州": [102.911027, 34.983385],
            "甘孜州": [101.96231, 30.04952],
            "甘孜藏族自治州": [101.96231, 30.04952],
            "白城": [122.839024, 45.619641],
            "白山": [126.423587, 41.939994],
            "白银": [104.138559, 36.544756],
            "百色": [106.618201, 23.902333],
            "益阳": [112.35518, 28.55386],
            "盐城": [120.163561, 33.347382],
            "盘锦": [122.070714, 41.119997],
            "眉山": [103.848538, 30.075439],
            "石嘴山": [106.383303, 38.983236],
            "石家庄": [114.51486, 38.042307],
            "石河子": [86.035478, 44.302],
            "福州": [119.296494, 26.074507],
            "秦皇岛": [119.600492, 39.935385],
            "章丘": [117.533386, 36.714252],
            "红河州": [103.374799, 23.36313],
            "绍兴": [120.580232, 30.029752],
            "绥化": [126.968887, 46.653845],
            "绵阳": [104.679114, 31.46745],
            "聊城": [115.985371, 36.456703],
            "肇庆": [112.465091, 23.047191],
            "胶南": [119.995514, 35.875137],
            "胶州": [120.033382, 36.26468],
            "自贡": [104.778442, 29.33903],
            "舟山": [122.207215, 29.985295],
            "芜湖": [118.432941, 31.352859],
            "苏州": [120.585315, 31.298886],
            "茂名": [110.925456, 21.662999],
            "荆州": [112.239741, 30.335165],
            "荆门": [112.199265, 31.035423],
            "荣成": [122.486658, 37.16516],
            "莆田": [119.007777, 25.454084],
            "莱州": [119.940154, 37.180703],
            "莱芜": [117.676723, 36.213813],
            "莱西": [120.51769, 36.889084],
            "菏泽": [115.480656, 35.23375],
            "萍乡": [113.854556, 27.622768],
            "营口": [122.235417, 40.667012],
            "葫芦岛": [120.836932, 40.711052],
            "蓬莱": [120.757579, 37.793492],
            "蚌埠": [117.389719, 32.916287],
            "衡水": [115.670177, 37.73892],
            "衡阳": [112.571997, 26.89323],
            "衢州": [118.859457, 28.970079],
            "襄阳": [112.122414, 32.008986],
            "西双版纳州": [100.797777, 22.007351],
            "西宁": [101.778228, 36.617144],
            "西安": [108.940174, 34.341568],
            "许昌": [113.85264, 34.035506],
            "诸暨": [120.247219, 29.715452],
            "贵港": [109.598926, 23.11153],
            "贵阳": [106.630153, 26.647661],
            "贺州": [111.566694, 24.403582],
            "资阳": [104.627636, 30.128901],
            "赣州": [114.935029, 25.831829],
            "赤峰": [118.886856, 42.257817],
            "辽源": [125.143532, 42.887918],
            "辽阳": [123.236944, 41.267244],
            "达州": [107.468023, 31.209571],
            "运城": [111.007528, 35.026412],
            "连云港": [119.221611, 34.596653],
            "迪庆州": [99.702234, 27.818882],
            "通化": [125.939697, 41.728401],
            "通辽": [122.243444, 43.65289],
            "遂宁": [105.592898, 30.532847],
            "遵义": [106.927389, 27.725654],
            "邢台": [114.504844, 37.070589],
            "那曲地区": [92.051239, 31.476202],
            "邯郸": [114.538961, 36.625657],
            "邵阳": [111.467791, 27.238892],
            "郑州": [113.625368, 34.746599],
            "郴州": [113.014717, 25.770509],
            "鄂尔多斯": [109.781327, 39.608266],
            "鄂州": [114.894843, 30.39194],
            "酒泉": [98.494483, 39.73241],
            "重庆": [106.551556, 29.563009],
            "金华": [119.647444, 29.079059],
            "金坛": [119.573395, 31.744398],
            "金昌": [102.188043, 38.520089],
            "钦州": [108.654146, 21.979933],
            "铁岭": [123.726166, 42.223769],
            "铜仁地区": [109.191551, 27.718346],
            "铜川": [108.945233, 34.896756],
            "铜陵": [117.812079, 30.945429],
            "银川": [106.230909, 38.487193],
            "锡林郭勒盟": [116.048222, 43.933454],
            "锦州": [121.127003, 41.095119],
            "镇江": [119.425836, 32.187849],
            "长春": [125.323544, 43.817071],
            "长沙": [112.938814, 28.228209],
            "长治": [113.116255, 36.195386],
            "阜新": [121.670323, 42.021619],
            "阜阳": [115.814204, 32.890124],
            "防城港": [108.353846, 21.68686],
            "阳江": [111.982232, 21.857958],
            "阳泉": [113.580519, 37.856971],
            "阿克苏地区": [80.260605, 41.168779],
            "阿勒泰地区": [88.141253, 47.844924],
            "阿坝州": [102.224653, 31.899413],
            "阿拉善盟": [105.728969, 38.851892],
            "阿里地区": [80.105804, 32.501111],
            "陇南": [104.921841, 33.400684],
            "随州": [113.382458, 31.690215],
            "雅安": [103.013261, 29.980537],
            "青岛": [120.382639, 36.067082],
            "鞍山": [122.994329, 41.108647],
            "韶关": [113.597522, 24.810403],
            "马鞍山": [118.506759, 31.670452],
            "驻马店": [114.022298, 33.011529],
            "鸡西": [130.969333, 45.295075],
            "鹤壁": [114.297272, 35.747225],
            "鹤岗": [130.297964, 47.349916],
            "鹰潭": [117.069202, 28.260189],
            "黄冈": [114.872316, 30.453905],
            "黄南州": [102.015248, 35.519548],
            "黄山": [118.337481, 29.714655],
            "黄石": [115.03852, 30.199652],
            "黑河": [127.52856, 50.245329],
            "黔东南州": [107.982859, 26.583442],
            "黔南州": [107.522097, 26.254092],
            "黔西南州": [104.906396, 25.087825],
            "齐齐哈尔": [123.918186, 47.354348],
            "龙岩": [117.017536, 25.075123]
        };

        var convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var geoCoord = geoCoordMap[data[i].name];
                if (geoCoord) {
                    res.push({
                        name: data[i].name,
                        value: geoCoord.concat(data[i].value)
                    });
                }
            }
            return res;
        };

        option = {
            // backgroundColor: '#404a59',
            title: {
                text: ' ',
                subtext: 'data from PM25.in',
                sublink: 'http://www.pm25.in',
                x: 'center',
                textStyle: {
                    color: '#fff'
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return params.name + ' : ' + params.value[2];
                }
            },
            legend: {
                orient: 'vertical',
                y: 'bottom',
                x: 'right',
                data: ['pm2.5'],
                textStyle: {
                    color: '#fff'
                }
            },
            visualMap: {
                min: 0,
                max: 200,
                calculable: true,
                inRange: {
                    color: ['#50a3ba', '#eac736', '#d94e5d']
                },
                textStyle: {
                    color: '#fff'
                }
            },
            geo: {
                map: 'china',
                label: {
                    emphasis: {
                        show: false
                    }
                },
                roam: true,
                itemStyle: {
                    normal: {
                        areaColor: '#323c48',
                        borderColor: '#111'
                    },
                    emphasis: {
                        areaColor: '#2a333d'
                    }
                }
            },
            series: [{
                    name: 'pm2.5',
                    type: 'scatter',
                    coordinateSystem: 'geo',
                    data: convertData(data),
                    symbolSize: function (val) {
                        return val[2] / 10 + 5;
                    },
                    showEffectOn: 'render',
                    label: {
                        normal: {
                            show: false
                        },
                        emphasis: {
                            show: false
                        }
                    },
                    itemStyle: {
                        emphasis: {
                            borderColor: '#fff',
                            borderWidth: 1
                        }
                    }
                },
                {
                    name: 'Top 10',
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    data: convertData(data.sort(function (a, b) {
                        return b.value - a.value;
                    }).slice(0, 21)),
                    symbolSize: function (val) {
                        return val[2] / 10 + 5;
                    },
                    showEffectOn: 'render',
                    label: {
                        normal: {
                            formatter: '{b}',
                            position: 'right',
                            show: true
                        },
                        emphasis: {
                            show: false
                        }
                    },
                    itemStyle: {
                        emphasis: {
                            borderColor: '#fff',
                            borderWidth: 1
                        }
                    },
                    zlevel: 1
                }
            ]
        };
        myChart.setOption(option);
        myChart.on('click', function (params) {
            // alert(params);
            if (params.componentType == "geo") {
                // alert("pro");
                window.open('provincemap/' + encodeURIComponent(params.name));

            } else {
                window.open('citymap/' + encodeURIComponent(params.name));
            }

            // alert(params.name)

        });
    });
    myChart.hideLoading();
        window.addEventListener("resize", function () {
            myChart.resize();
        });
    };


    //echart_3中国词云
    function echart_3() {
        // 基于准备好的dom，初始化echarts实例
        var word_cloud_Chart = echarts.init(document.getElementById('chart_3'));
        word_cloud_Chart.clear();
        $.post("/data/china_aqirank_top", function (data, status) {
            var word_cloud_Option = {

                series: [{
                    name: '空气质量指数',
                    type: 'wordCloud',
                    size: ['9%', '30%'],
                    // sizeRange: [10, 66],
                    //textRotation: [0, 45, 90, -45],
                    rotationRange: [-45, 90],
                    //shape: 'circle',
                    textPadding: 10,
                    autoSize: {
                        enable: true,
                        minSize: 6
                    },
                    textStyle: {
                        normal: {
                            color: function () {
                                return 'rgb(' + [
                                    Math.round(Math.random() * 155 + 100),
                                    Math.round(Math.random() * 155 + 100),
                                    Math.round(Math.random() * 155 + 100)
                                ].join(',') + ')';
                            }
                        },
                        emphasis: {
                            shadowBlur: 5,
                            shadowColor: '#333'
                        }
                    },
                    data: []
                }]
            };

            var JosnList = data;

            

            word_cloud_Option.series[0].data = JosnList;
            word_cloud_Chart.on('click', function (params) {
                //alert((params.name));
                window.open('citymap/' + encodeURIComponent(params.name));
            });
            word_cloud_Chart.setOption(word_cloud_Option);
        });
    }

    //河南词云
    function echart_4() {
        // 基于准备好的dom，初始化echarts实例
        $.post("/data/henan_aqirank", function (data, status) {
            var word_cloud_Chart = echarts.init(document.getElementById('chart_4'));

            word_cloud_Chart.clear();
            var word_cloud_Option = {

                series: [{
                    name: '空气质量指数',
                    type: 'wordCloud',
                    size: ['9%', '99%'],
                    // sizeRange: [10, 66],
                    //textRotation: [0, 45, 90, -45],
                    rotationRange: [-45, 90],
                    //shape: 'circle',
                    textPadding: 10,
                    autoSize: {
                        enable: true,
                        minSize: 6
                    },
                    textStyle: {
                        normal: {
                            color: function () {
                                return 'rgb(' + [
                                    Math.round(Math.random() * 155 + 100),
                                    Math.round(Math.random() * 155 + 100),
                                    Math.round(Math.random() * 155 + 100)
                                ].join(',') + ')';
                            }
                        },
                        emphasis: {
                            shadowBlur: 5,
                            shadowColor: '#333'
                        }
                    },
                    data: []
                }]
            };

            var JosnList = data;
            word_cloud_Option.series[0].data = JosnList;
            word_cloud_Chart.on('click', function (params) {
                //alert((params.name));
                window.open('citymap/' + encodeURIComponent(params.name).replace("%E5%B8%82", ""));
            });
            word_cloud_Chart.setOption(word_cloud_Option);
        });
    }

    //全国达标城市
    function echart_6() {
        var myChart = echarts.init(document.getElementById('chart_6'));

        myChart.setOption(option = {
            color:['lightblue', 'lightgreen','yellow','orange','red'],
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'left',
                data: ['优', '良', '轻度污染', '中度污染', '重度污染']
            },
            series: [
                {
                    name:'访问来源',
                    type:'pie',
                    radius: ['50%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: '30',
                                fontWeight: 'bold',
                                color:'#FFFFFF'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data: [{
                            value: 11,
                            name: '优'
                        },
                        {
                            value: 6,
                            name: '良'
                        },
                        {
                            value: 1,
                            name: '轻度污染'
                        },
                        {
                            value: 0,
                            name: '中度污染'
                        },
                        {
                            value: 0,
                            name: '重度污染'
                        }
                    ]
                }
            ]
        });
    }
    function echart_5() {
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('chart_5'));

        function showProvince() {
            // var geoCoordMap = {
            //     '长沙黄花国际机场': [113.226512, 28.192929],
            //     '张家界荷花机场': [110.454598, 29.107223],
            //     '常德桃花源机场': [111.651508, 28.921516],
            //     '永州零陵机场': [111.622869, 26.340994],
            //     '怀化芷江机场': [109.714784, 27.44615],
            // };
            // var data = [{
            //         name: '长沙黄花国际机场',
            //         value: 100
            //     },
            //     {
            //         name: '张家界荷花机场',
            //         value: 100
            //     },
            //     {
            //         name: '常德桃花源机场',
            //         value: 100
            //     },
            //     {
            //         name: '永州零陵机场',
            //         value: 100
            //     },
            //     {
            //         name: '怀化芷江机场',
            //         value: 100
            //     }
            // ];
            // var max = 480,
            //     min = 9; // todo 
            // var maxSize4Pin = 100,
            //     minSize4Pin = 20;
            // var convertData = function (data) {
            //     var res = [];
            //     for (var i = 0; i < data.length; i++) {
            //         var geoCoord = geoCoordMap[data[i].name];
            //         if (geoCoord) {
            //             res.push({
            //                 name: data[i].name,
            //                 value: geoCoord.concat(data[i].value)
            //             });
            //         }
            //     }
            //     return res;
            // };

            myChart.setOption(option = {
                color:['lightblue', 'lightgreen','yellow','orange','red'],
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b}: {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    x: 'left',
                    data: ['优', '良', '轻度污染', '中度污染', '重度污染']
                },
                series: [
                    {
                        name:'访问来源',
                        type:'pie',
                        radius: ['50%', '70%'],
                        avoidLabelOverlap: false,
                        label: {
                            normal: {
                                show: false,
                                position: 'center'
                            },
                            emphasis: {
                                show: true,
                                textStyle: {
                                    fontSize: '30',
                                    fontWeight: 'bold',
                                    color:'#FFFFFF'
                                }
                            }
                        },
                        labelLine: {
                            normal: {
                                show: false
                            }
                        },
                        data: [{
                                value: 11,
                                name: '优'
                            },
                            {
                                value: 6,
                                name: '良'
                            },
                            {
                                value: 1,
                                name: '轻度污染'
                            },
                            {
                                value: 0,
                                name: '中度污染'
                            },
                            {
                                value: 0,
                                name: '重度污染'
                            }
                        ]
                    }
                ]
            });
           
        }
        showProvince();

        // 使用刚指定的配置项和数据显示图表。
        // myChart.setOption(option);
        window.addEventListener("resize", function () {
            myChart.resize();
        });
    }

    //点击跳转
    // // $('#chart_map').click(function () {
    // //     window.location.href = './data/郑州.html';
    // // });
    // $('.t_btn2').click(function () {
    //     window.location.href = "./page/index.html?id=2";
    // });
    // $('.t_btn3').click(function () {
    //     window.location.href = "./page/index.html?id=3";
    // });
    // $('.t_btn4').click(function () {
    //     window.location.href = "./page/index.html?id=4";
    // });
    // $('.t_btn5').click(function () {
    //     window.location.href = "./page/index.html?id=5";
    // });
    $('.t_btn6').click(function () {
        window.location.href = "./test/";
    });
    // // $('.t_btn7').click(function () {
    // //     window.location.href = "./page/index.html?id=7";
    // // });
    // $('.t_btn8').click(function () {
    //     window.location.href = "./page/index.html?id=8";
    // });
    // $('.t_btn9').click(function () {
    //     window.location.href = "./page/index.html?id=9";
    // });
});